<!DOCTYPE html>
<html>
<head>
    <title>ç»„ä»¶æµ‹è¯•è¯Šæ–­</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .status { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .success { background: #f6ffed; border: 1px solid #b7eb8f; color: #52c41a; }
        .error { background: #fff2f0; border: 1px solid #ffccc7; color: #ff4d4f; }
        .warning { background: #fffbe6; border: 1px solid #ffe58f; color: #faad14; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 4px; overflow: auto; }
    </style>
</head>
<body>
    <h1>ğŸš‡ äººæ°‘åŸè½¨2.0 - ç»„ä»¶è¯Šæ–­æµ‹è¯•</h1>
    <div id="loading">æ­£åœ¨åŠ è½½ä¾èµ–...</div>
    <div id="results" style="display: none;"></div>
    
    <!-- åŠ è½½ä¾èµ– -->
    <script src="https://cdn.jsdelivr.net/npm/react@17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/antd@4.24.15/dist/antd-with-locales.min.js"></script>
    
    <!-- æµ‹è¯•åŸºç¡€å·¥å…· -->
    <script src="js/utils/mockData.js"></script>
    <script src="js/utils/auth.js"></script>
    
    <!-- åŠ è½½æ–°ç»„ä»¶ -->
    <script src="js/pages/LoginLogoutLogs.js"></script>
    <script src="js/pages/ContentPublishLogs.js"></script>
    <script src="js/pages/ApprovalLogs.js"></script>
    <script src="js/pages/AgentManagement.js"></script>
    <script src="js/pages/KnowledgeBaseManagement.js"></script>
    
    <script>
        // ç­‰å¾…æ‰€æœ‰è„šæœ¬åŠ è½½å®Œæˆ
        window.addEventListener('load', function() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('results').style.display = 'block';
            
            const results = document.getElementById('results');
            
            // æ£€æŸ¥åŸºç¡€ä¾èµ–
            let html = '<h2>ğŸ“‹ åŸºç¡€ä¾èµ–æ£€æŸ¥</h2>';
            
            const dependencies = {
                'React': typeof React !== 'undefined',
                'ReactDOM': typeof ReactDOM !== 'undefined', 
                'Ant Design': typeof antd !== 'undefined',
                'AuthUtils': typeof window.AuthUtils !== 'undefined',
                'MockData': typeof window.MockData !== 'undefined'
            };
            
            for (const [name, status] of Object.entries(dependencies)) {
                const statusClass = status ? 'success' : 'error';
                const statusIcon = status ? 'âœ…' : 'âŒ';
                html += `<div class="status ${statusClass}">${statusIcon} ${name}: ${status ? 'å·²åŠ è½½' : 'æœªåŠ è½½'}</div>`;
            }
            
            // æ£€æŸ¥ç»„ä»¶
            html += '<h2>ğŸ”§ ç»„ä»¶åŠ è½½æ£€æŸ¥</h2>';
            const components = [
                'LoginLogoutLogs',
                'ContentPublishLogs', 
                'ApprovalLogs',
                'AgentManagement',
                'KnowledgeBaseManagement'
            ];
            
            let componentErrors = [];
            
            components.forEach(name => {
                const exists = window[name];
                const statusClass = exists ? 'success' : 'error';
                const statusIcon = exists ? 'âœ…' : 'âŒ';
                html += `<div class="status ${statusClass}">${statusIcon} ${name}: ${exists ? 'å·²åŠ è½½' : 'æœªåŠ è½½'}</div>`;
                
                if (exists) {
                    // å°è¯•å®ä¾‹åŒ–ç»„ä»¶
                    try {
                        const testInstance = React.createElement(window[name]);
                        html += `<div class="status success">   â””â”€ ${name} å¯ä»¥å®ä¾‹åŒ–</div>`;
                    } catch (error) {
                        html += `<div class="status error">   â””â”€ ${name} å®ä¾‹åŒ–å¤±è´¥: ${error.message}</div>`;
                        componentErrors.push(`${name}: ${error.message}`);
                    }
                }
            });
            
            // æ£€æŸ¥å…¨å±€é”™è¯¯
            html += '<h2>ğŸ› é”™è¯¯æ£€æŸ¥</h2>';
            
            if (window.componentLoadErrors && window.componentLoadErrors.length > 0) {
                html += '<div class="status error">å‘ç°ç»„ä»¶åŠ è½½é”™è¯¯:</div>';
                window.componentLoadErrors.forEach(error => {
                    html += `<div class="status error">âŒ ${error}</div>`;
                });
            }
            
            if (componentErrors.length > 0) {
                html += '<div class="status error">å‘ç°ç»„ä»¶å®ä¾‹åŒ–é”™è¯¯:</div>';
                componentErrors.forEach(error => {
                    html += `<div class="status error">âŒ ${error}</div>`;
                });
            }
            
            if (window.componentLoadErrors?.length === 0 && componentErrors.length === 0) {
                html += '<div class="status success">âœ… æœªå‘ç°é”™è¯¯</div>';
            }
            
            // æ˜¾ç¤ºç¯å¢ƒä¿¡æ¯
            html += '<h2>ğŸŒ ç¯å¢ƒä¿¡æ¯</h2>';
            html += `<pre>
ç”¨æˆ·ä»£ç†: ${navigator.userAgent}
å½“å‰URL: ${window.location.href}
æ—¶é—´æˆ³: ${new Date().toISOString()}
Reactç‰ˆæœ¬: ${React.version || 'æœªçŸ¥'}
            </pre>`;
            
            results.innerHTML = html;
        });
        
        // å…¨å±€é”™è¯¯æ•è·
        window.componentLoadErrors = [];
        
        window.addEventListener('error', function(e) {
            window.componentLoadErrors.push(`JavaScripté”™è¯¯: ${e.error?.message || e.message} (${e.filename}:${e.lineno})`);
        });
        
        window.addEventListener('unhandledrejection', function(e) {
            window.componentLoadErrors.push(`Promiseé”™è¯¯: ${e.reason}`);
        });
    </script>
</body>
</html> 